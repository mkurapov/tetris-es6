{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8155d9a6a5e3c5592d03","webpack:///./src/index.js","webpack:///./src/Tetrominos.js"],"names":["KEY","ESC","SPACE","LEFT","UP","RIGHT","DOWN","coloursMap","Tetris","canvas","rows","columns","height","window","innerHeight","width","scaleFactor","ctx","getContext","speed","gameState","gameBoard","currentTet","i","rowsTemp","Array","fill","push","document","addEventListener","ev","keyDown","resizeCanvas","renderGameBoard","x","y","colour","scaledX","scaledY","fillStyle","fillRect","strokeStyle","lineWidth","strokeRect","colourOfBlock","drawRect","insertTetromino","piece","n","matrix","length","boardXOffset","boardYOffset","bounds","Error","e","console","log","clearTetromino","copyPiece","orientation","rotate","validMove","redrawPiece","boardYOffsetBelow","gameBoardCopy","row","filteredRow","filter","val","splice","unshift","checkRows","join","tetrominos","tet2","Math","floor","random","direction","moveDown","bottomEmpty","spawnTetromino","moveRight","moveLeft","keyCode","handleRotation","makeMove","Tetromino","newArray","updateOrientation","orientationArray","oldOrientation","newOrientIndex","indexOf","TetrominoL","TetrominoJ","TetrominoZ","TetrominoS","TetrominoI","TetrominoO"],"mappings":"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","file":"Tetris.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Tetris\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Tetris\"] = factory();\n\telse\n\t\troot[\"Tetris\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8155d9a6a5e3c5592d03\n **/","import {Tetromino, TetrominoL, TetrominoJ, TetrominoZ, TetrominoS, TetrominoI, TetrominoO} from 'Tetrominos'\n\nconst KEY     = { ESC: 27, SPACE: 32, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40 }\nconst coloursMap = {\n  'E':'#fafafa',\n  'B':'#8CA4D4',\n  'O':'#FDCDA7',\n  'P':'#C2A1DA',\n  'R':'#EF8B8B',\n  'Y':'#FAF1A2',\n  'C':'#D6E9F8',\n  'G':'#C5D9A6'\n};\n\n// 'E':'#f4eded',\n\nexport default class Tetris {\n\n  constructor(canvas) {\n    this.canvas = canvas\n    this.rows = 20\n    this.columns = 10\n\n    this.canvas.height = window.innerHeight\n    this.canvas.width = (window.innerHeight)/2\n    this.scaleFactor = (this.canvas.height/this.rows)\n\n    this.ctx = canvas.getContext(\"2d\")\n\n    this.speed = 10\n    this.gameState = 1 //1 playing, 0 over\n\n    this.gameBoard = []; //make 10*20 game board\n    this.currentTet = {}\n\n    for (let i = 0; i < this.rows; i++)\n    {\n      const rowsTemp = Array(this.columns).fill('E')\n      this.gameBoard.push(rowsTemp)\n    }\n\n    document.addEventListener('keydown', (ev) => this.keyDown(ev), false);\n    window.addEventListener('resize', (ev) => this.resizeCanvas(ev), false);\n\n  }\n\n  resizeCanvas(ev)\n  {\n    this.canvas.height = window.innerHeight\n    this.canvas.width = (window.innerHeight)/2\n    this.scaleFactor = (this.canvas.height/this.rows)\n    this.renderGameBoard()\n  }\n\n\n  drawRect(x,y, colour) {\n    const scaledX = x * this.scaleFactor\n    const scaledY = y * this.scaleFactor\n    this.ctx.fillStyle = colour;\n    this.ctx.fillRect(scaledX,scaledY, this.scaleFactor, this.scaleFactor);\n\n    this.ctx.strokeStyle = \"white\";\n    this.ctx.lineWidth   = 0.5;\n    this.ctx.strokeRect(scaledX,scaledY, this.scaleFactor, this.scaleFactor);\n  }\n\n\n  renderGameBoard()\n  {\n\n\n\n    for (let y = 0; y < this.rows; y++)\n    {\n      for (let x = 0; x < this.columns; x++)\n      {\n        const colourOfBlock = coloursMap[this.gameBoard[y][x]]\n        this.drawRect(x, y, colourOfBlock)\n      }\n    }\n  }\n\n\n  redrawPiece()\n  {\n    this.insertTetromino()\n    this.renderGameBoard()\n  }\n\n  validMove(piece)\n  {\n    //console.log(piece.matrix.join('\\n'));\n    //console.log(piece.x);\n    const n = piece.matrix.length\n\n\n    for (let y = 0;y < n;y++)\n    {\n      for (let x = 0; x < n; x++)\n      {\n        const boardXOffset = piece.x + x\n        const boardYOffset = piece.y + y\n\n\n        //if (boardXOffset === this.columns) return false\n\n\n        if (this.currentTet.matrix[y][x] !== 'E')\n        {\n          //console.log('piece x: '+x+' piece y: '+y);\n          //try to get gameboard at board offsets, if exception, then piece is out of bounds\n          try {\n            const bounds = this.gameBoard[boardYOffset][boardXOffset]\n\n            if ((bounds !== 'E')||(boardXOffset === this.columns)) {throw new Error('hit something')}\n\n          } catch (e) {\n            console.log('out of index');\n            return false\n          }\n        }\n\n      }\n    }\n\n    //console.log('------------');\n\n\n    return  true\n\n\n\n  }\n\n\n  clearTetromino()\n  {\n    const n = this.currentTet.matrix.length\n\n    for (let y = 0;y < n;y++)\n    {\n      for (let x = 0; x < n; x++)\n      {\n        const boardXOffset = this.currentTet.x + x\n        const boardYOffset = this.currentTet.y + y\n        if (this.currentTet.matrix[y][x] !== 'E') this.gameBoard[boardYOffset][boardXOffset] = 'E'\n      }\n    }\n  }\n\n  insertTetromino()\n  {\n\n    const n = this.currentTet.matrix.length\n\n\n    for (let y = 0; y < n; y++)\n    {\n      for (let x = 0; x < n; x++)\n      {\n        const boardXOffset = this.currentTet.x + x\n        const boardYOffset = this.currentTet.y + y\n        if (this.currentTet.matrix[y][x] !== 'E') this.gameBoard[boardYOffset][boardXOffset] = this.currentTet.matrix[y][x] //inital check will make sure not out of bounds\n\n      }\n    }\n  }\n\n\n\n  handleRotation()\n  {\n    this.clearTetromino();\n\n    let copyPiece = new Tetromino()\n    copyPiece.x = this.currentTet.x\n    copyPiece.y = this.currentTet.y\n    copyPiece.matrix = this.currentTet.matrix\n    copyPiece.orientation = this.currentTet.orientation\n\n   // console.log(copyPiece.matrix.join('\\n'));\n\n    copyPiece.rotate()\n\n   // console.log(copyPiece.matrix.join('\\n'));\n\n    if (this.validMove(copyPiece))  {this.currentTet.rotate()}\n\n\n    this.redrawPiece()\n  }\n\n\n  bottomEmpty(piece)\n  {\n    const n = piece.matrix.length\n\n    for (let y = 0;y < n;y++)\n    {\n      for (let x = 0; x < n; x++)\n      {\n        const boardXOffset = piece.x + x;\n        const boardYOffsetBelow = piece.y + y + 1;\n\n\n        if (piece.matrix[y][x] !== 'E')\n        {\n\n          //try to get gameboard at board offsets, if exception, then piece is out of bounds\n          try {\n            const bounds = this.gameBoard[boardYOffsetBelow][boardXOffset]\n            //console.log(boardYOffsetBelow);\n            if (bounds !== 'E') return false\n\n          } catch (e) {\n            console.log('out of index');\n            return false\n          }\n        }\n      }\n    }\n\n    return true\n\n  }\n\n  checkRows()\n  {\n      let gameBoardCopy = this.gameBoard\n\n      for (let row = this.rows-1 ; row >= 0;row--)\n      {\n        let filteredRow = (gameBoardCopy[row]).filter((val) => {return val === 'E'})\n\n        if (filteredRow.length === 0)\n        {\n          this.gameBoard.splice(row, 1)\n          const rowsTemp = Array(this.columns).fill('E')\n          this.gameBoard.unshift(rowsTemp)\n          row++\n        }\n\n        console.log(filteredRow);\n      }\n\n    this.renderGameBoard()\n  }\n\n\n  spawnTetromino()\n  {\n    this.checkRows()\n    console.log(this.gameBoard.join('\\n'));\n    const tetrominos = [new TetrominoI(), new TetrominoJ(), new TetrominoL(), new TetrominoS(), new TetrominoZ(), new TetrominoO]\n\n    let tet2 = tetrominos[Math.floor(Math.random()*tetrominos.length)];\n    this.currentTet = tet2\n    this.insertTetromino()\n    this.renderGameBoard()\n  }\n\n  makeMove(direction)\n  {\n    this.clearTetromino()\n    let copyPiece = new Tetromino()\n    copyPiece.x = this.currentTet.x\n    copyPiece.y = this.currentTet.y\n    copyPiece.matrix = this.currentTet.matrix\n\n\n    switch(direction) {\n      case KEY.DOWN:\n        copyPiece.moveDown()\n\n        if (this.validMove(copyPiece))\n        {\n          this.currentTet.moveDown()\n          if (!this.bottomEmpty(copyPiece))\n          {\n            this.insertTetromino()\n            this.spawnTetromino()\n          }\n          else\n          {\n            this.redrawPiece()\n          }\n\n        //  console.log(this.gameBoard.join('\\n'));\n\n        }\n\n        break;\n      case KEY.RIGHT:\n        copyPiece.moveRight()\n        if (this.validMove(copyPiece))\n        {\n          this.currentTet.moveRight()\n          this.redrawPiece()\n        }\n        break;\n      case KEY.LEFT:\n        copyPiece.moveLeft()\n        if (this.validMove(copyPiece))\n        {\n          this.currentTet.moveLeft()\n          this.redrawPiece()\n        }\n        break;\n    }\n\n\n\n\n  }\n\n\n\n\n  keyDown(ev) {\n      switch(ev.keyCode) {\n        case KEY.UP:\n          this.handleRotation();\n          break;\n        case KEY.DOWN:\n          this.makeMove(KEY.DOWN);\n          break;\n        case KEY.RIGHT:\n          this.makeMove(KEY.RIGHT);\n          break;\n        case KEY.LEFT:\n          this.makeMove(KEY.LEFT);\n          break;\n      }\n    //console.clear()\n    //console.log(this.gameBoard.join('\\n'));\n  }\n\n  run()\n  {\n\n\n    this.currentTet = new TetrominoL()\n\n    this.insertTetromino()\n\n\n    this.renderGameBoard()\n\n\n\n\n\n\n  }\n\n}\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","export class Tetromino {\n\n  constructor() {\n    this.orientation = 'u'\n    this.matrix = []\n    this.x = 3\n    this.y = 1\n  }\n\n  rotate()\n  {\n    //console.log('rotating');\n    const n = this.matrix.length\n\n    let newArray = []\n    for (let i = 0; i < n; i++)\n    {\n      const rowsTemp = Array(n).fill()\n      newArray.push(rowsTemp)\n    }\n\n\n\n\n\n\n    for(let y = 0; y < n;y++) {\n        for(let x = 0; x < n; x++) {\n          newArray[y][x] = this.matrix[n - x - 1][y];\n        }\n    }\n\n    this.matrix = newArray\n    this.updateOrientation()\n\n  }\n  \n\n  updateOrientation()\n  {\n    const orientationArray = ['u','r','d','l']\n    const oldOrientation = this.orientation\n    \n    const newOrientIndex = (orientationArray.indexOf(oldOrientation)+1) % 4;\n    this.orientation = orientationArray[newOrientIndex]\n  }\n\n  \n  moveRight(){this.x += 1}\n  moveLeft(){this.x -= 1}\n  moveDown(){this.y += 1}\n\n\n\n\n}\n\nexport class TetrominoL extends Tetromino\n{\n  constructor() {\n    super()\n    this.colour = 'B'\n    this.matrix = [\n        ['B','E','E'],\n        ['B','B','B'],\n        ['E','E','E']\n    ]\n  }\n}\n\nexport class TetrominoJ extends Tetromino\n{\n  constructor() {\n    super()\n    this.colour = 'J'\n    this.matrix = [\n      ['E','E','O'],\n      ['O','O','O'],\n      ['E','E','E']\n    ]\n  }\n}\n\nexport class TetrominoZ extends Tetromino\n{\n  constructor() {\n    super()\n    this.colour = 'R'\n    this.matrix = [\n      ['R','R','E'],\n      ['E','R','R'],\n      ['E','E','E']\n    ]\n  }\n}\n\nexport class TetrominoS extends Tetromino\n{\n  constructor() {\n    super()\n    this.colour = 'G'\n    this.matrix = [\n      ['E','G','G'],\n      ['G','G','E'],\n      ['E','E','E']\n    ]\n  }\n}\n\nexport class TetrominoI extends Tetromino\n{\n  constructor() {\n    super()\n    this.colour = 'C'\n    this.matrix = [\n      ['E','E','E','E'],\n      ['C','C','C','C'],\n      ['E','E','E','E'],\n      ['E','E','E','E']\n    ]\n  }\n}\n\nexport class TetrominoO extends Tetromino\n{\n  constructor() {\n    super()\n    this.colour = 'Y'\n    this.matrix = [\n      ['Y','Y'],\n      ['Y','Y']\n    ]\n  }\n\n  rotate()\n  {\n    // do nothing\n  }\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Tetrominos.js\n **/"],"sourceRoot":""}